# template:
#   - binary_sensor:
#       - name: Shed status
#         device_class: problem
#         state: >
#           {% set temperature = states('sensor.shed_thermometer') | float %}
#           {{ temperature < 0 or temperature > 10 }}
#         availability: >
#           {{ not is_state('sensor.shed_thermometer', 'unavailable') }}

# alert:
#   shed_temperature:
#     name: Shed temperature
#     entity_id: binary_sensor.shed_status
#     repeat: 30
#     message: "🌡️ Temperature in shed is {{ states('sensor.shed_thermometer') }}"
#     done_message: Shed temperature is OK
#     notifiers:
#       - pushnotification
#       - mobile_app_nokia_7_2
#     data:
#       clickAction: lovelace/thermometer
#       channel: shed_temperature
#       tag: shed_temperature
#       requireInteraction: true
#       url: lovelace/thermometer
#       actions:
#         - action: shed_temperature_ignore
#           title: 🔕 Ignore 🌡️
#           icon: mdi:thermometer-high

# automation:
#   - alias: Temperature shed acknowledged
#     trigger:
#       - platform: event
#         event_type:
#           - html5_notification.clicked
#           - mobile_app_notification_action
#         event_data:
#           action: shed_temperature_ignore
#     action:
#       - service: html5.dismiss
#         data:
#           tag: shed_temperature
#       - service: notify.mobile_app_nokia_7_2
#         data:
#           message: clear_notification
#           data:
#             tag: shed_temperature
