# Configure a default setup of Home Assistant (frontend, api, etc)
default_config:
notify:
  - name: everyone
    platform: group
    services:
      - service: mobile_app_samsung
      - service: mobile_app_nokia_7_2
  - platform: html5
    name: pushnotification
    vapid_pub_key: !secret vapid_pub_key
    vapid_prv_key: !secret vapid_prv_key
    vapid_email: !secret vapid_email

influxdb:
  host: a0d7b954-influxdb
  port: 8086
  database: homeassistant
  username: homeassistant
  password: !secret influxdb_password
  max_retries: 3
  measurement_attr: entity_id
  exclude:
    domains:
      - automation
      - persistent_notification

homeassistant:
  allowlist_external_dirs:
    - "/config/"
  auth_providers:
    - type: homeassistant
    - type: trusted_networks
      trusted_networks:
        - 192.168.1.0/25

http:
  trusted_proxies:
    - 192.168.1.252
  use_x_forwarded_for: true
  ip_ban_enabled: true
  login_attempts_threshold: 3

recorder:
  purge_keep_days: 800

sensor:
  - platform: filesize
    file_paths:
      - /config/home-assistant_v2.db
  - platform: systemmonitor
    resources:
      - type: disk_free
        arg: /home
      - type: memory_use_percent
      - type: processor_use
      - type: last_boot
  - platform: command_line
    command: python3 -c "import requests; import json; import random; dataRequest = requests.get('https://cdn-secure.buienalarm.nl/api/3.4/forecast.php?lat=52.095&lon=5.103&region=nl&unit=mm%2Fu&c='+str(random.randint(0,999999999999999)) ).text; dataRequest = dataRequest.replace('\r\n',' '); data = '{\"data\":'+dataRequest+'}';    print(data);"
    name: Neerslag_Buienalarm_Regen_Data
    json_attributes:
      - data
    value_template: "last_changed: {{states.sensor.neerslag_buienalarm_regen_data.last_changed | default(now())}}"
    scan_interval: 240

shell_command:
  backup_logs: cp /config/home-assistant.log /config/home-assistant.log.bk

tts:
  - platform: google_translate

alert: !include alert.yaml
automation: !include automations.yaml
binary_sensor: !include binary_sensor.yaml
climate: !include climate.yaml
plant: !include plant.yaml
script: !include scripts.yaml
sensor mold: !include mold.yaml
template: !include template.yaml
